<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Storybound: Danger and Decadence</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://use.typekit.net/bzl3zth.css">

  <style>
/* =========================
   STORYBOUND LOCKED CARDS UI
   ========================= */
.sb-cards-wrap { margin: 14px 0 10px; }
.sb-hand {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  padding: 12px 6px 8px;
  margin: 0 0 10px;
}

.sb-slot{
  position: relative;
  width: 128px;
  height: 192px;
  margin-left: -42px;
  transform-origin: 50% 120%;
  transition: transform .16s ease, filter .16s ease, opacity .22s ease;
}
.sb-slot:first-child{ margin-left: 0; }

.sb-slot[data-i="0"]{ transform: rotate(-10deg) translateY(4px); }
.sb-slot[data-i="1"]{ transform: rotate(-5deg) translateY(2px); }
.sb-slot[data-i="2"]{ transform: rotate(0deg) translateY(0px); }
.sb-slot[data-i="3"]{ transform: rotate(5deg) translateY(2px); }
.sb-slot[data-i="4"]{ transform: rotate(10deg) translateY(4px); }

@media (max-width: 760px){
  .sb-hand{
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 12px;
    padding: 0;
  }
  .sb-slot{
    width: 100%;
    max-width: 220px;
    height: 220px;
    justify-self: center;
    margin-left: 0;
    transform: none !important;
  }
}

.sb-card{
  position: absolute; inset: 0;
  border-radius: 16px;
  perspective: 1100px;
  cursor: pointer;
  user-select: none;
}
.sb-inner{
  position: absolute; inset: 0;
  transform-style: preserve-3d;
  transition: transform .36s cubic-bezier(.2,.8,.2,1), box-shadow .2s ease, filter .2s ease;
  border-radius: 16px;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,.55));
}
.sb-face{
  position: absolute; inset: 0;
  backface-visibility: hidden;
  border-radius: 16px;
  overflow: hidden;
}

/* back */
.sb-back{
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,.10), transparent 45%),
    linear-gradient(135deg, rgba(255,215,0,.18), rgba(0,0,0,.40));
  border: 1px solid rgba(255,215,0,.28);
}
.sb-back::before{
  content:"";
  position:absolute; inset:0;
  background-image: repeating-linear-gradient(45deg, rgba(255,215,0,.08) 0 6px, rgba(0,0,0,0) 6px 12px);
  opacity:.62;
}
.sb-badge{
  position:absolute; left:10px; top:10px;
  display:flex; align-items:center; gap:8px;
  padding: 7px 9px;
  border-radius: 999px;
  border: 1px solid rgba(255,215,0,.35);
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(6px);
}
.sb-sig{
  width: 18px; height: 18px; border-radius: 6px;
  display:grid; place-items:center;
  border: 1px solid rgba(255,215,0,.35);
  background: rgba(255,215,0,.08);
  font-size: 12px;
}
.sb-lbl{
  font-size: 11px;
  letter-spacing: .2px;
  color: rgba(255,255,255,.88);
  white-space: nowrap;
}
.sb-intensity{
  position:absolute; left:10px; bottom:10px; right:10px;
  height: 8px; border-radius: 999px;
  border: 1px solid rgba(255,215,0,.22);
  background: rgba(0,0,0,.35);
  overflow:hidden;
}
.sb-intensity > div{
  height:100%;
  background: linear-gradient(90deg, rgba(255,215,0,.25), rgba(255,215,0,.70));
}

/* front art only (no text) */
.sb-front{
  transform: rotateY(180deg);
  background:#000;
  border: 1px solid rgba(255,215,0,.28);
}
.sb-front img{ width:100%; height:100%; object-fit: cover; display:block; }

/* selected / dim */
.sb-slot.sb-selected{ z-index: 6; }
.sb-slot.sb-selected .sb-inner{
  transform: rotateY(180deg) scale(1.05);
  box-shadow: 0 14px 34px rgba(0,0,0,.62);
}
.sb-slot.sb-dim{ opacity: .80; filter: grayscale(.2) brightness(.95); }

/* burn/redeal */
.sb-slot.sb-poof{
  pointer-events:none;
  animation: sbPoof .45s ease forwards;
}
@keyframes sbPoof{
  0%{ opacity:1; transform: translateY(0) scale(1); }
  70%{ opacity:.35; filter: blur(1px); }
  100%{ opacity:0; transform: translateY(10px) scale(.88); filter: blur(3px); }
}

:root{
  --bg1:#0a001f;
  --bg2:#2a0033;
  --pink:#ff69b4;
  --hot:#ff1493;
  --gold:#ffd700;
  --ink:#f0e6ff;
  --panel: rgba(20,0,40,.6);
  --panel2: rgba(10,0,30,.8);

  --p1:#ffd6ef;  /* Player 1 */
  --p2:#d7f1ff;  /* Love interest */
  --npc:#e7e0ff; /* Others */
}

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: linear-gradient(135deg, var(--bg1), var(--bg2));
  color: var(--ink);
  overflow-x: hidden;
}

body {
  font-family: 'Lora', serif;
  text-align: center;
  padding: 8px;
}

h1, h2, #mainTitle, #bookTitle, .section-title {
  font-family: 'lust-script-display', 'lust-script', 'Lora', serif;
  color: var(--pink);
  text-shadow: 0 0 15px var(--hot);
}

.section-title{
  font-size: 2.1em;
  margin: 18px 0 10px;
  text-align:center;
}

.subtitle {
  font-size: 1.1em;
  font-style: italic;
  color: var(--gold);
  margin: 25px 0 45px;
  line-height: 1.3;
}

.choice-buttons {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin: 45px auto;
  max-width: 240px;
}
@media (min-width: 768px) {
  .choice-buttons {
    flex-direction: row;
    gap: 50px;
    max-width: none;
  }
}

button.choice {
  background: linear-gradient(145deg, #8b008b, var(--hot));
  color: var(--gold);
  padding: 15px 45px;
  border: none;
  border-radius: 30px;
  font-size: 1.6em;
  cursor: pointer;
  box-shadow: 0 0 30px rgba(255, 20, 147, .6);
  transition: .3s;
  font-family: 'lust-script-display', 'lust-script', 'Lora', serif;
}
button.choice:hover {
  transform: scale(1.12);
  box-shadow: 0 0 45px rgba(255, 105, 180, 1);
}

.box {
  max-width: 88%;
  width: 560px;
  margin: 20px auto;
  padding: 25px;
  background: var(--panel);
  border-radius: 15px;
  border: 1.2px solid var(--pink);
  box-shadow: 0 0 20px rgba(255, 105, 180, .4);
  text-align: center;
}

input, select, textarea {
  width: 92%;
  padding: 10px;
  margin: 10px auto;
  background: rgba(30, 0, 50, .95);
  color: var(--ink);
  border: 1.2px solid var(--pink);
  border-radius: 9px;
  font-size: 0.98em;
  font-family: 'Lora', serif;
  box-sizing: border-box;
}

input:focus, textarea:focus, select:focus {
  background: rgba(40, 0, 60, 1) !important;
  outline: none;
  box-shadow: 0 0 12px var(--pink);
  color: #fff;
}

button {
  background: linear-gradient(145deg, #8b008b, var(--hot));
  color: var(--gold);
  padding: 10px 30px;
  border: none;
  border-radius: 25px;
  font-size: 1em;
  cursor: pointer;
  box-shadow: 0 0 18px rgba(255, 20, 147, .6);
  transition: .3s;
  margin: 6px;
  font-family: 'Lora', serif;
  position: relative;
}
button:hover {
  transform: scale(1.08);
  box-shadow: 0 0 30px rgba(255, 105, 180, .9);
}
button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
}
/* =========================
   STORYBOUND SELECTED STATES
   ========================= */

.choice-btn,
.pill-btn,
.card-choice-btn {
  position: relative;
}

.choice-btn.selected,
.pill-btn.selected,
.card-choice-btn.selected,
.intensity-btn.active {
  outline: 2px solid rgba(255,105,180,0.9);
  box-shadow: 0 0 0 4px rgba(255,105,180,0.22);
  transform: translateY(-1px);
}

.choice-btn.locked,
.pill-btn.locked,
.card-choice-btn.locked {
  opacity: 0.45;
  filter: grayscale(0.4);
  cursor: not-allowed !important;
}

.choice-btn.locked:hover,
.pill-btn.locked:hover,
.card-choice-btn.locked:hover {
  transform: none;
  box-shadow: none;
}

/* story typography */
#story {
  background: var(--panel2);
  padding: 26px 26px 30px;
  margin: 18px auto 24px;
  max-width: 920px;
  width: 92%;
  text-align: left;

  font-family: 'Lora', serif;
  font-size: 1.12em;
  line-height: 1.95;

  border-left: 5px solid var(--hot);
  min-height: 360px;
  overflow-y: auto;
  border-radius: 12px;
  box-shadow: inset 0 0 0 1px rgba(255,105,180,0.12);
}

.story-line{ margin: 1.05em 0; opacity: 0.98; }

.dialogue-line{
  margin: 0.95em 0;
  padding-left: 16px;
  border-left: 3px solid rgba(255,105,180,0.95);
  font-style: italic;
  font-size: 1.18em;
  line-height: 1.9;
  color: var(--npc);
}
.dialogue-p1{ color: var(--p1) !important; }
.dialogue-p2{ color: var(--p2) !important; }

.story-separator {
  margin: 18px 0 12px;
  text-align: center;
  font-size: 1.55em;
  color: var(--gold);
  opacity: 0.95;
  text-shadow: 0 0 10px rgba(255,20,147,0.35);
  user-select: none;
}

.story-image{
  margin: 14px 0 10px;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(255,105,180,0.35);
  box-shadow: 0 0 26px rgba(255,20,147,0.22);
  background: rgba(0,0,0,0.25);
}
.story-image img{
  width: 100%;
  display:block;
  max-height: 62vh;
  object-fit: cover;
}
.story-image figcaption{
  padding: 10px 12px;
  color: var(--gold);
  opacity: 0.9;
  font-style: italic;
  font-size: 0.95em;
  background: rgba(0,0,0,0.25);
}

/* Setting shot */
#settingShotWrap{
  display:none;
  margin: 12px auto 0;
  max-width: 920px;
  width: 92%;
  text-align:left;
}
#settingShotImg{
  width:100%;
  max-height: 52vh;
  object-fit: cover;
  border-radius: 12px;
  border: 1px solid rgba(255,105,180,0.35);
  box-shadow: 0 0 26px rgba(255,20,147,0.25);
  background: rgba(0,0,0,0.25);
  display:block;
}
#settingShotCaption{
  margin-top: 8px;
  color: var(--gold);
  opacity:0.9;
  font-style: italic;
  font-size:0.95em;
}

.turn {
  font-size: 1.05em;
  color: var(--gold);
  margin: 10px 30px 0;
  text-shadow: 0 0 10px var(--hot);
  font-weight: normal;
}

.status {
  font-size: 1.1em;
  color: var(--gold);
  margin: 18px 0 12px;
  font-style: italic;
}

.style-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 20px;
  margin: 18px 0;
}

.card {
  background: #252525;
  border-radius: 12px;
  padding: 18px;
  cursor: pointer;
  transition: all .25s;
  border: 2px solid transparent;
  text-align:left;
  position: relative;
  overflow: hidden;
}
.card:hover {
  border-color: #ff6b6b;
  transform: translateY(-4px);
  box-shadow: 0 10px 20px rgba(255, 107, 107, .2);
}
.card.selected {
  border-color: #ff6b6b;
  background: #333;
}

/* Locked style cards */
.card.locked{ cursor: pointer; opacity: 0.42; }

/* Handcuff badge (expects /handcuffs.png at site root; optional) */
.card.locked::after,
.card.greyed-locked::after{
  content: "";
  position: absolute;
  top: 10px;
  right: 10px;
  width: 22px;
  height: 22px;
  background: url("/handcuffs.png") center / contain no-repeat;
  pointer-events: none;
  opacity: 0.92;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.45));
  transition: transform .14s ease, opacity .14s ease, filter .14s ease;
}

/* Tasteful hover glow */
.card.locked:hover::after,
.card.locked:focus-within::after,
.card.greyed-locked:hover::after,
.card.greyed-locked:focus-within::after{
  opacity: 1;
  transform: scale(1.06);
  filter:
    drop-shadow(0 2px 3px rgba(0,0,0,0.55))
    drop-shadow(0 0 10px rgba(255,105,180,0.35));
}

button.locked::after,
button.greyed-locked::after{
  content: "";
  position: absolute;
  top: 8px;
  right: 8px;
  width: 22px;
  height: 22px;
  background: url("/handcuffs.png") center / contain no-repeat;
  pointer-events: none;
  opacity: 0.95;
  filter: drop-shadow(0 1px 3px rgba(0,0,0,0.6));
}

button.locked,
button.greyed-locked{
  position: relative;
}

/* paywall cursor (optional; if file missing browser just falls back) */
.paywall-cursor,
.locked,
.greyed-locked,
.card.locked,
.card.greyed-locked,
button.locked,
button.greyed-locked,
.locked *,
.greyed-locked *{
  cursor: url("/cursor-dollar-plane-64.png") 10 10, pointer !important;
}

.card h3 { margin: 0 0 8px; color: #ff6b6b; font-size: 1.05em; }
.card p { font-size: 0.95em; opacity: .92; margin: 0 0 10px; }

.preview-btn {
  background: #333;
  padding: 8px 14px;
  font-size: 0.95em;
  margin-top: 8px;
  border-radius: 10px;
  box-shadow: none;
}
.preview-btn:hover { background:#444; }

#modal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, .82);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 100;
}
#modal-content {
  background: #1e1e1e;
  padding: 26px;
  border-radius: 12px;
  max-width: 860px;
  width: 92%;
  text-align: left;
  border: 1px solid rgba(255,105,180,0.35);
  box-shadow: 0 0 30px rgba(255,20,147,0.35);
}

/* Gates */
#ageGate, #tosGate, #tierChoice {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: #000;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  color: #fff;
  text-align: center;
  padding: 20px;
  font-family: 'Lora', serif;
}

/* Loading overlay */
#loadingOverlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.65);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 200;
}
#loadingOverlayInner {
  background: rgba(10, 0, 30, 0.95);
  padding: 18px 26px 14px 26px;
  border-radius: 14px;
  box-shadow: 0 0 35px rgba(255, 20, 147, 0.8);
  min-width: 280px;
  text-align: left;
  font-size: 0.95em;
}
#loadingOverlayBar {
  width: 100%;
  height: 6px;
  background: rgba(255, 255, 255, 0.12);
  border-radius: 999px;
  overflow: hidden;
  margin-top: 8px;
}
<script src="/fatecards/storybound-cards.js"></script>

<script>
(function(){

  // --- CONFIG & STATE ---
  var PROXY_URL = 'https://storybound-proxy.vercel.app/api/proxy';
  var STORY_MODEL = 'grok-4-1-fast-reasoning';
  var COPY_ICON = '/copy.png';
  var COPIED_ICON = '/copied.png';

  var mode = null;      // solo|couple
  var tier = null;      // free|indulge
  var intensity = 'clean';
  var currentRoomCode = null;
  var selectedCardEl = null;

  // Stranger counters
  var strangerUniqueKey = 'storybound_stranger_unique_v1';
  var strangerClicksKey = 'storybound_stranger_clicks_v1';

  // --- DOM HELPERS ---
  function $(id){ return document.getElementById(id); }
  function on(id, evt, fn){ var el = $(id); if (el) el.addEventListener(evt, fn); }
  function show(id, display){ var el=$(id); if(el) el.style.display = display || 'block'; }
  function hide(id){ var el=$(id); if(el) el.style.display='none'; }
  
  function hideAllScreens(){
    ['ageGate','tosGate','tierChoice','mainTitle','mainSubtitle','modeChoices','setup','game','coupleConnect','invite','waiting']
      .forEach(hide);
  }

  function showBurger(){ if ($('burgerMenuBtn')) $('burgerMenuBtn').style.display='block'; }
  function hideBurger(){ if ($('burgerMenuBtn')) $('burgerMenuBtn').style.display='none'; }

  // --- NAVIGATION ---
  function goToAgeGate(){ hideAllScreens(); show('ageGate','flex'); hideBurger(); }
  function goToTOS(){ hideAllScreens(); show('tosGate','flex'); hideBurger(); }
  function goToTierChoice(){ hideAllScreens(); show('tierChoice','flex'); showBurger(); mode=null; }
  
  function goToModeChoice(){ 
    hideAllScreens(); 
    show('mainTitle'); show('mainSubtitle'); show('modeChoices','flex'); 
    showBurger(); window.scrollTo(0,0); 
  }
  
  function goToSetup(){ hideAllScreens(); show('setup'); showBurger(); window.scrollTo(0,0); }
  function goToGame(){ hideAllScreens(); show('game'); showBurger(); window.scrollTo(0,0); }
  function goToCoupleConnect(){ hideAllScreens(); show('coupleConnect'); showBurger(); window.scrollTo(0,0); }

  // --- TIER & LOCKS LOGIC ---
  function applyTierLocks(){
    var isTease = (tier === 'free');
    
    // 1. Lock Elements marked data-tier="indulge"
    document.querySelectorAll('[data-tier="indulge"]').forEach(function(node){
      node.classList.toggle('locked', isTease);
    });

    // 2. Lock Inputs (Do/Say/Submit)
    var ids = ['actionInput','dialogueInput','sendBtn'];
    ids.forEach(function(id){
       var el = $(id);
       if(!el) return;
       
       if(isTease){
          el.classList.add('is-locked', 'sb-locked');
          el.disabled = true;
       } else {
          el.classList.remove('is-locked', 'sb-locked');
          el.disabled = false;
       }
    });

    // 3. Card Selection Locks (Tease limit)
    var mount = $('cardMount');
    if (mount) {
      var cards = mount.querySelectorAll('.fate-card, .sb-card');
      cards.forEach(function(card, idx){
        // In Tease, lock cards index 2, 3, 4 (the last three)
        if (isTease && idx >= 2) {
            card.classList.add('sb-select-locked');
        } else {
            card.classList.remove('sb-select-locked');
        }
      });
    }
  }

  // --- INTENSITY LOGIC ---
  function setIntensity(val){
    intensity = val || 'naughty';
    var mapHint = {
      clean: 'Flirt, chemistry, and longing. No explicit anatomy.',
      naughty: 'Direct teasing with tasteful sensuality.',
      erotic: 'More explicit intimacy and sensual detail.',
      dirty: 'Very explicit language and bold scenes.'
    };
    if ($('intensityHint')) $('intensityHint').textContent = mapHint[intensity];

    // Toggle active classes
    ['clean','naughty','erotic','dirty'].forEach(function(k){
      var btn = $('intensity'+ k.charAt(0).toUpperCase() + k.slice(1) + 'Btn');
      if(btn) {
          if(k === intensity) btn.classList.add('is-active', 'active');
          else btn.classList.remove('is-active', 'active');
      }
    });
  }

  // --- SELECTION GROUPS (Genre, POV, etc) ---
  function wirePickGroups(){
    window.STORYBOUND_SELECTIONS = window.STORYBOUND_SELECTIONS || {};
    document.addEventListener('click', function(e){
      var el = e.target.closest('[data-pick-group][data-pick-value]');
      if (!el || el.classList.contains('sb-disabled') || el.disabled) return;

      var group = el.getAttribute('data-pick-group');
      var val = el.getAttribute('data-pick-value');

      // Clear active in this group
      document.querySelectorAll('[data-pick-group="'+group+'"]').forEach(function(n){ 
          n.classList.remove('active', 'is-active'); 
      });

      el.classList.add('active', 'is-active');
      window.STORYBOUND_SELECTIONS[group] = val;
    });
  }

  // --- CARD INTERACTION (The Critical Part) ---
  function wireCardMount(){
    var mount = $('cardMount');
    if (!mount) return;

    mount.addEventListener('click', function(e){
      var card = e.target.closest('.fate-card, .sb-card');
      if (!card) return;

      // 1. FLIP (Always allowed)
      card.classList.toggle('flipped');
      card.classList.toggle('is-flipped'); // Support both classes

      // 2. CHECK LOCKS
      if (card.classList.contains('sb-select-locked')) return;

      // 3. SELECT
      if (selectedCardEl && selectedCardEl !== card) selectedCardEl.classList.remove('selected');
      selectedCardEl = card;
      card.classList.add('selected');

      // 4. POPULATE INPUTS
      var say = card.getAttribute('data-say');
      var doAction = card.getAttribute('data-do'); // Note: attribute is data-do
      
      if ($('dialogueInput') && say) $('dialogueInput').value = say;
      if ($('actionInput') && doAction) $('actionInput').value = doAction;
    });
  }

  // --- EVENT LISTENERS ---
  
  // Gates
  on('ageYesBtn', 'click', goToTOS);
  on('ageNoBtn', 'click', function(){ window.location.href='https://google.com'; });
  on('tosAgree', 'change', function(e){
      var btn=$('tosEnterBtn'); 
      btn.disabled=!e.target.checked; 
      btn.style.background=e.target.checked?'#ff69b4':'#666'; 
  });
  on('tosEnterBtn', 'click', goToTierChoice);

  // Burger
  on('burgerMenuBtn','click', function(){ $('mainMenuOverlay').style.display='flex'; });
  on('menuCloseBtn','click', function(){ $('mainMenuOverlay').style.display='none'; });
  on('menuBackToTierBtn','click', function(){ $('mainMenuOverlay').style.display='none'; goToTierChoice(); });
  on('menuRestartStoryBtn','click', function(){ $('mainMenuOverlay').style.display='none'; if($('story'))$('story').innerHTML=''; goToModeChoice(); });

  // Tier Choice
  on('teaseBtn', 'click', function(){ tier='free'; applyTierLocks(); goToModeChoice(); });
  on('indulgeBtn', 'click', function(){ $('signupModal').style.display='flex'; });
  on('signupCancelBtn', 'click', function(){ $('signupModal').style.display='none'; });
  on('signupConfirmBtn', 'click', function(){
      if (!$('signupAgeConfirm').checked) return alert('Please confirm age.');
      tier='indulge';
      $('signupModal').style.display='none';
      applyTierLocks();
      goToModeChoice();
  });

  // Mode
  on('soloBtn', 'click', function(){ mode='solo'; goToSetup(); });
  on('coupleBtn', 'click', goToCoupleConnect);
  on('exitGameBtn', 'click', goToModeChoice);

  // Intensity Buttons
  on('intensityCleanBtn','click', function(){ setIntensity('clean'); });
  on('intensityNaughtyBtn','click', function(){ setIntensity('naughty'); });
  on('intensityEroticBtn','click', function(){ setIntensity('erotic'); });
  on('intensityDirtyBtn','click', function(){ setIntensity('dirty'); });

  // Start Story (Mock)
  on('begin-btn', 'click', function(){
      goToGame();
      $('bookTitle').style.display='block'; $('bookTitle').textContent='A Door With Teeth';
      if($('story')) $('story').innerHTML = '<p class="story-line">The system is ready. Your story begins now...</p>';
  });

  // --- BOOT SEQUENCE ---
  function boot(){
    // 1. Wire up logic
    wirePickGroups();
    wireCardMount();
    
    // 2. Set Defaults
    setIntensity('clean'); // Default
    
    // 3. Inject CSS for locked cards
    var style = document.createElement('style');
    style.textContent = '.sb-select-locked { opacity: 0.6; cursor: not-allowed; } .sb-select-locked:after { content:"ðŸ”’"; position:absolute; top:10px; right:10px; font-size:20px; }';
    document.head.appendChild(style);

    // 4. Start at Age Gate
    goToAgeGate();
  }

  // Run Boot
  boot();

})();
</script>
